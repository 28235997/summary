## arp协议
1. 在网络数据传输中，网络层会对传输层的数据进行封包形成ip包，只关心目标机器的ip
2. ip包被封装在以太网帧中，经过物理层(网卡)发送到网络上
3. 到达目标所在的局域网之后，以太网帧又是根据目的MAC地址来找到目的网卡的
   局域网中的所有网卡都会接收到这个帧，而只有帧头部的目的mac和自己网卡的mac匹配时才将此帧交付上层协议栈，否则丢弃该帧
4. 所以以太网帧里是需要目的mac的，然而主机刚连接到局域网时是不知道目的mac的，
5. 需要发送一个arp请求数据包，获得目的主机的mac地址，记录到arp表中
`(arp数据包也是被包含在以太网帧中的，发送时，帧头部中的目的mac地址填写为0xffffffff，表示在本地局域网上广播，这样属于该局域网的所有机器接收到一个广播帧的时候都会向协议栈递交这个帧中的数据包，这里是arp数据包)`

6. 找到先前缺少的mac地址而暂存的数据包，并用以太网帧封装他，填充目的mac地址域


1. 内核通过代码实现网络协议栈，硬件监听物理介质，进行数据的接收。
2. 当数据填满了缓冲区，就会产生中断
3. 中断产生后，系统会转向终端服务子程序，从硬件缓冲区复制到内核缓冲区


## TCP协议
### 滑动窗口
发送窗口：tcp一次可以发送多个MSS(Maximum Segment Size),mss加上 tcp头和ip头就得到MTU(最大传输单元)，
网络影响tcp的传输速度，那怎么知道一次发送多少个mss呢？目的是尽量不出现拥塞，出现就可能丢包
* 慢启动：
如果发出去的包都得到确认，表明还没有达到拥塞点，可以增大拥塞窗口。
由于这个阶段发生拥塞的概率很低，所以增速应该快一些。RFC 建议的算法是每
收到 n 个确认，可以把拥塞窗口增加 n 个 MSS。比如发了 2 个包之后收到 2 个确
认，拥塞窗口就增大到 2+2=4，接下来是 4+4=8, 8+8=16……这个过程的增速很快，
但是由于基数低，传输速度还是比较慢的，所以被称为慢启动过程。
* 拥塞避免
当慢启动到一定程度，就不能继续加倍了，要一次加一个mss，称为拥塞避免

* 超时重传
如果一段时间收不到包，就认定包丢失，就会引发超时重传，重传之后重新进入慢启动，一个mss

## UDP协议
udp包头较小，只有端口号，包长度，校验码等
udf没有重传机制，比如6个包丢一个包，只能重传所有包，而tcp只用重传丢失的一个包即可。
## DNS
DNS的递归查询和迭代查询
递归：先查询根域名服务器，然后根域名服务器查询权威域名服务器 由根域名服务器返回结果
迭代：先查询根域名服务器，然后根域名服务器告诉我要查询权威域名服务器，然后查询权威域名服务器，返回结果